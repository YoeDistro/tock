# Licensed under the Apache License, Version 2.0 or the MIT License.
# SPDX-License-Identifier: Apache-2.0 OR MIT
# Copyright Tock Contributors 2024.

include = [
  "../../cargo/tock_flags.toml",
  "../../cargo/unstable_flags.toml",
  "../../cargo/riscv_flags.toml",
]

[build]
target = "riscv32imac-unknown-none-elf"

[target.riscv32imac-unknown-none-elf]
runner = ["qemu-system-riscv32",
          "-machine", "virt",
          "-semihosting",
          "-global", "driver=riscv-cpu,property=smepmp,value=true",
          "-global", "virtio-mmio.force-legacy=false",
          "-device", "virtio-rng-device",
          "-device", "virtio-keyboard-device",
          "-device", "virtio-gpu-device",
          "-serial", "stdio",
          "-bios", "qemu_rv32_virt.bin"]

[unstable]
config-include = true
